

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content>
  <meta name="author" content="chumen77">
  <meta name="keywords" content>
  <title>linux- Lamp搭建记录 - Chumen77&#39;s Blog</title>

  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css">


  <link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css">
  <link rel="stylesheet" href="/lib/hint/hint.min.css">

  
    
    
      
      <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/apache-config.min.css">
    
  

  


<!-- 主题依赖的图标库，不要自行修改 -->
<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">

<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">

<link rel="stylesheet" href="/css/main.css">

<!-- 自定义样式保持在最底部 -->


  <script src="/js/utils.js"></script>
  <script src="/js/color-schema.js"></script>
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Chumen77's Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container page-header text-center fade-in-up">
            <span class="h2" id="subtitle">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-04-08 14:24" pubdate>
        2020年4月8日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      1.8k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      31
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" id="post">
            <!-- SEO header -->
            <h1 style="display: none">linux- Lamp搭建记录</h1>
            
            <div class="markdown-body" id="post-body">
              <h1 id="Lamp搭建记录"><a href="#Lamp搭建记录" class="headerlink" title="Lamp搭建记录"></a>Lamp搭建记录</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="安装编译环境："><a href="#安装编译环境：" class="headerlink" title="安装编译环境："></a>安装编译环境：</h3><div class="hljs"><pre><code class="hljs undefined">yum -y <span class="hljs-keyword">install</span> gcc*</code></pre></div>

<p>安装好后记得关闭防火墙和selinux</p>
<h3 id="准备软件包"><a href="#准备软件包" class="headerlink" title="准备软件包"></a>准备软件包</h3><p><img src="http://qiqianyun.chumen77.xyz/uPic/phSpwE.png" srcset="/img/loading.gif" alt><br>把这些安装包都放入虚拟机自定义的路径，等待使用。</p>
<h3 id="shell脚本批量解包"><a href="#shell脚本批量解包" class="headerlink" title="shell脚本批量解包"></a>shell脚本批量解包</h3><div class="hljs"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span>
/bin/ls *tar.gz &gt; ls.list
/bin/ls *tgz &gt;&gt; ls.list
<span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> `cat ls.list`
<span class="hljs-keyword">do</span>
        /bin/tar -zxf <span class="hljs-variable">$a</span>
<span class="hljs-keyword">done</span>
rm -rf ls.list</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/YX4fnr.png" srcset="/img/loading.gif" alt><br>然后开始一一的装包，注意需要按照一定的顺序来装的。</p>
<h2 id="python-devel"><a href="#python-devel" class="headerlink" title="python-devel"></a>python-devel</h2><div class="hljs"><pre><code class="hljs bash">yum -y install python-devel</code></pre></div>

<p>安装python的底层环境。</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost lamp1]<span class="hljs-comment"># cd libxml2-2.9.1/</span>
[root@localhost libxml2-2.9.1]<span class="hljs-comment"># ./configure --prefix=/usr/local/libxml2/</span>
[root@localhost libxml2-2.9.1]<span class="hljs-comment"># make</span>
[root@localhost libxml2-2.9.1]<span class="hljs-comment"># make install</span></code></pre></div>

<h2 id="libmcrypt"><a href="#libmcrypt" class="headerlink" title="libmcrypt"></a>libmcrypt</h2><p>提供一些加密算法：</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost lamp1]<span class="hljs-comment"># cd libmcrypt-2.5.8/</span>
[root@localhost libmcrypt-2.5.8]<span class="hljs-comment"># ./configure --prefix=/usr/local/libmcrypt/</span>
[root@localhost libmcrypt-2.5.8]<span class="hljs-comment"># make</span>
[root@localhost libmcrypt-2.5.8]<span class="hljs-comment"># make install</span></code></pre></div>

<h2 id="libltdl"><a href="#libltdl" class="headerlink" title="libltdl"></a>libltdl</h2><div class="hljs"><pre><code class="hljs bash">[root@localhost lamp1]<span class="hljs-comment"># cd libmcrypt-2.5.8/libltdl/</span>
[root@localhost libltdl]<span class="hljs-comment"># ./configure --enable-ltdl-install</span>
[root@localhost libltdl]<span class="hljs-comment"># make</span>
[root@localhost libltdl]<span class="hljs-comment"># make install</span></code></pre></div>

<h2 id="mhash"><a href="#mhash" class="headerlink" title="mhash"></a>mhash</h2><p>提供加密方式的扩展</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost lamp1]<span class="hljs-comment"># cd mhash-0.9.9.9/</span>
[root@localhost mhash-0.9.9.9]<span class="hljs-comment"># ./configure</span></code></pre></div>

<h2 id="mcrypt"><a href="#mcrypt" class="headerlink" title="mcrypt"></a>mcrypt</h2><p>提供php相关的加密支持拓展库</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost mcrypt-2.6.8]<span class="hljs-comment"># LD_LIBRARY_PATH=/usr/local/libmcrypt/lib:/usr/local/lib \./configure --with-libmcrypt-prefix=/usr/local/libmcrypt</span>
[root@localhost mcrypt-2.6.8]<span class="hljs-comment"># make</span>
[root@localhost mcrypt-2.6.8]<span class="hljs-comment"># make install</span></code></pre></div>

<h2 id="zlib"><a href="#zlib" class="headerlink" title="zlib"></a>zlib</h2><p>提供压缩用途的函数库</p>
<div class="hljs"><pre><code class="hljs bash">[roott@localhost lamp1]<span class="hljs-comment"># cd zlib-1.2.3/</span>
[root@localhost zlib-1.2.3]<span class="hljs-comment"># ./configure</span>
[root@localhost zlib-1.2.3]<span class="hljs-comment"># make</span>
[root@localhost zlib-1.2.3]<span class="hljs-comment"># make install</span></code></pre></div>

<h2 id="libpng"><a href="#libpng" class="headerlink" title="libpng"></a>libpng</h2><div class="hljs"><pre><code class="hljs bash">[root@localhost zlib-1.2.3]<span class="hljs-comment"># cd ../</span>
[root@localhost lamp1]<span class="hljs-comment"># cd libpng-1.2.31/</span>
[root@localhost libpng-1.2.31]<span class="hljs-comment"># ./configure --prefix=/usr/local/libpng</span>
[root@localhost libpng-1.2.31]<span class="hljs-comment"># make </span>
[root@localhost libpng-1.2.31]<span class="hljs-comment"># make install</span></code></pre></div>

<p>如果出现：</p>
<div class="hljs"><pre><code class="hljs bash">/usr/bin/ld: //usr/<span class="hljs-built_in">local</span>/lib/libz.a(crc32.o): relocation R_X86_64_32 against `.rodata<span class="hljs-string">' can not be used when making a shared object; recompile with -fPIC</span></code></pre></div>

<p>解决办法 ： </p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost lamp1]<span class="hljs-comment"># cd zlib-1.2.3 //进入zlib目录</span>
[root@localhost zlib-1.2.3]<span class="hljs-comment"># ./configure</span>

[root@localhost zlib-1.2.3]<span class="hljs-comment"># CFLAGS="-O3 -fPIC" ./configure   --prefix=/usr/local/zlib/ #使用64位元的方法进行编译</span>

[root@localhost zlib-1.2.3]<span class="hljs-comment"># make</span>

[root@localhost zlib-1.2.3]<span class="hljs-comment"># make install</span>

[root@localhost zlib-1.2.3]<span class="hljs-comment"># make clean</span></code></pre></div>

<p>然后在重新来安装libpng即可。</p>
<h2 id="jpeg6"><a href="#jpeg6" class="headerlink" title="jpeg6"></a>jpeg6</h2><p>提供jpeg格式的图片</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost libpng-1.2.31]<span class="hljs-comment"># mkdir /usr/local/jpeg6</span>
[root@localhost libpng-1.2.31]<span class="hljs-comment"># mkdir /usr/local/jpeg6/bin</span>
[root@localhost libpng-1.2.31]<span class="hljs-comment"># mkdir /usr/local/jpeg6/lib</span>
[root@localhost libpng-1.2.31]<span class="hljs-comment"># mkdir /usr/local/jpeg6/include</span>
[root@localhost libpng-1.2.31]<span class="hljs-comment"># mkdir -p /usr/local/jpeg6/man/man1</span></code></pre></div>

<div class="hljs"><pre><code class="hljs bash">root@localhost lamp]<span class="hljs-comment"># cd jpeg-6b/</span>
[root@localhost jpeg-6b]<span class="hljs-comment"># ./configure --prefix=/usr/local/jpeg6/ --enable-shared --enable-static</span></code></pre></div>

<p>如果发生这样的报错：</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost jpeg-6b]<span class="hljs-comment"># make</span>
./libtool --mode=compile gcc -O2  -I. -c ./jcapimin.c
make: ./libtool：命令未找到
make: *** [jcapimin.lo] 错误 127</code></pre></div>

<p>需要：</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost jpeg-6b]<span class="hljs-comment"># yum -y install libtool</span>
[root@localhost jpeg-6b]<span class="hljs-comment"># cp /usr/share/libtool/config/config.guess .</span>
cp：是否覆盖<span class="hljs-string">"./config.guess"</span>？ yes
[root@localhost jpeg-6b]<span class="hljs-comment"># make clean</span></code></pre></div>

<p>重新再来就好。</p>
<h2 id="freetype"><a href="#freetype" class="headerlink" title="freetype"></a>freetype</h2><p>字体库。</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost freetype-2.3.5]<span class="hljs-comment"># ./configure --prefix=/usr/local/freetype</span></code></pre></div>

<h2 id="GD"><a href="#GD" class="headerlink" title="GD"></a>GD</h2><p>给php提供图形拓展的库</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost lamp]<span class="hljs-comment"># mkdir /usr/local/gd2</span>
[root@localhost lamp]<span class="hljs-comment"># cd /usr/src/lamp/gd-2.0.35/</span>
[root@localhost gd-2.0.35]<span class="hljs-comment"># ./configure --prefix=/usr/local/gd2/ --with-jpeg=/usr/local/jpeg6/ --with-freetype=/usr/local/freetype/ --with-png=/usr/local/libpng/</span></code></pre></div>

<p>这样会爆一个错，然后需要改一下源码：</p>
<div class="hljs"><pre><code class="hljs bash">[root@localhost gd-2.0.35]<span class="hljs-comment"># vim gd_png.c</span></code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/3NJrzC.png" srcset="/img/loading.gif" alt><br>需要指定一下路径即可，这个刚刚是已经安装过的。</p>
<h2 id="httped"><a href="#httped" class="headerlink" title="httped"></a>httped</h2><p>先装两个工具包：</p>
<div class="hljs"><pre><code class="hljs undefined">cp -r apr<span class="hljs-number">-1.4</span><span class="hljs-number">.6</span> httpd<span class="hljs-number">-2.4</span><span class="hljs-number">.7</span>/srclib/apr

cp -r apr-util<span class="hljs-number">-1.4</span><span class="hljs-number">.1</span> httpd<span class="hljs-number">-2.4</span><span class="hljs-number">.7</span>/srclib/apr-util</code></pre></div>

<h3 id="开始装httped："><a href="#开始装httped：" class="headerlink" title="开始装httped："></a>开始装httped：</h3><p>先进入装一下pcre：</p>
<div class="hljs"><pre><code class="hljs undefined">./configure
<span class="hljs-built_in">make</span>
<span class="hljs-built_in">make</span> install</code></pre></div>

<p>进入httped：<br>先对配置进行设置：</p>
<div class="hljs"><pre><code class="hljs undefined">./configure <span class="hljs-attribute">--prefix</span>=/usr/local/apache2/ <span class="hljs-attribute">--sysconfdir</span>=/usr/local/apache2/etc --with-include-apr --enable-so <span class="hljs-attribute">--enable-deflate</span>=shared <span class="hljs-attribute">--enable-expires</span>=shared <span class="hljs-attribute">--enable-rewrite</span>=shared
make
make install</code></pre></div>

<h3 id="开服务："><a href="#开服务：" class="headerlink" title="开服务："></a>开服务：</h3><div class="hljs"><pre><code class="hljs undefined"><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/apache2/</span>bin<span class="hljs-regexp">/apachectl start</span></code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/hdY4Sy.png" srcset="/img/loading.gif" alt></p>
<h3 id="自启动"><a href="#自启动" class="headerlink" title="自启动"></a>自启动</h3><div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost httpd<span class="hljs-number">-2.4</span><span class="hljs-number">.7</span>]# vim /etc/rc.d/rc.local</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/eqeQsw.png" srcset="/img/loading.gif" alt></p>
<p>设置开机时自动启动这个服务。</p>
<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><h3 id="准备工作-1"><a href="#准备工作-1" class="headerlink" title="准备工作"></a>准备工作</h3><p>装两个工具：</p>
<div class="hljs"><pre><code class="hljs undefined">[root<span class="hljs-symbol">@localhost</span> <span class="hljs-keyword">local</span>]<span class="hljs-meta"># yum -y install cmake</span>
[root<span class="hljs-symbol">@localhost</span> <span class="hljs-keyword">local</span>]<span class="hljs-meta"># yum -y install bison</span>
[root<span class="hljs-symbol">@localhost</span> <span class="hljs-keyword">local</span>]<span class="hljs-meta"># yum -y install ncurses-devel</span></code></pre></div>

<p>建立一个用户：</p>
<div class="hljs"><pre><code class="hljs undefined">[root<span class="hljs-symbol">@localhost</span> <span class="hljs-keyword">local</span>]<span class="hljs-meta"># useradd mysql</span>
[root<span class="hljs-symbol">@localhost</span> <span class="hljs-keyword">local</span>]<span class="hljs-meta"># id mysql</span>
uid=<span class="hljs-number">1001</span>(mysql) gid=<span class="hljs-number">1001</span>(mysql) 组=<span class="hljs-number">1001</span>(mysql)</code></pre></div>

<p>安装ncurses：</p>
<div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost ncurses<span class="hljs-number">-5.9</span>]# ./configure --with-<span class="hljs-keyword">shared</span> --without-debug --with-ada --enable-overwrite
[<span class="hljs-symbol">root@</span>localhost ncurses<span class="hljs-number">-5.9</span>]# make
[<span class="hljs-symbol">root@</span>localhost ncurses<span class="hljs-number">-5.9</span>]# make install</code></pre></div>

<h3 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h3><div class="hljs"><pre><code class="hljs undefined">
[root@localhost mysql-5.5.23]# cmake <span class="hljs-attribute">-DCMAKE_INSTALL_PREFIX</span>=/usr/local/mysql \
&gt; <span class="hljs-attribute">-DMYSQL_UNIX_ADDR</span>=/tmp/mysql.sock <span class="hljs-attribute">-DEXTRA_CHARSET</span>=all <span class="hljs-attribute">-DDEFAULT_CHARSET</span>=utf8 \
&gt; <span class="hljs-attribute">-DDEFAULT_COLLATION</span>=utf8_general_ci <span class="hljs-attribute">-DWITH_MYISAM_STORAGE_ENGINE</span>=1 \
&gt; <span class="hljs-attribute">-DWITH_INNOBASE_STORAGE_ENGINE</span>=1 <span class="hljs-attribute">-DWITH_MEMORY_STORAGE_ENGINE</span>=1 \
&gt; <span class="hljs-attribute">-DWITH_READLINE</span>=1 <span class="hljs-attribute">-DENABLED_LOCAL_INFILE</span>=1 <span class="hljs-attribute">-DMYSQL_USER</span>=mysql \
&gt; <span class="hljs-attribute">-DMYSQL_TCP_PORT</span>=3306</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/kEl78g.png" srcset="/img/loading.gif" alt></p>
<div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost  mysql<span class="hljs-number">-5.5</span><span class="hljs-number">.23</span>]# make
[<span class="hljs-symbol">root@</span>localhost  mysql<span class="hljs-number">-5.5</span><span class="hljs-number">.23</span>]# make install</code></pre></div>

<h3 id="简单设置"><a href="#简单设置" class="headerlink" title="简单设置"></a>简单设置</h3><p>初始化mysql：</p>
<div class="hljs"><pre><code class="hljs undefined">[root<span class="hljs-symbol">@localhost</span> mysql]<span class="hljs-meta"># chown -R mysql:mysql .</span>
[root<span class="hljs-symbol">@localhost</span> mysql]<span class="hljs-meta"># /usr/local/mysql/scripts/mysql_install_db --user=mysql</span></code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/PIJriB.png" srcset="/img/loading.gif" alt><br>设置权限：</p>
<div class="hljs"><pre><code class="hljs undefined">[root<span class="hljs-symbol">@localhost</span> mysql]<span class="hljs-meta"># chown -R root .</span>
[root<span class="hljs-symbol">@localhost</span> mysql]<span class="hljs-meta"># chown -R mysql data/</span></code></pre></div>

<p>覆盖一下配置文件：</p>
<div class="hljs"><pre><code class="hljs undefined">[root@localhost mysql]# <span class="hljs-keyword">cp</span> support-<span class="hljs-keyword">files</span>/my-medium.<span class="hljs-keyword">cnf</span> /etc/my.<span class="hljs-keyword">cnf</span>
<span class="hljs-keyword">cp</span>：是否覆盖<span class="hljs-string">"/etc/my.cnf"</span>？ yes</code></pre></div>

<p>接着初始化：</p>
<div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost mysql]# /usr/local/mysql/bin/mysqld_safe --user=mysql
<span class="hljs-number">200408</span> <span class="hljs-number">03</span>:<span class="hljs-number">38</span>:<span class="hljs-number">45</span> mysqld_safe Logging to <span class="hljs-string">'/usr/local/mysql/data/localhost.localdomain.err'</span>.
<span class="hljs-number">200408</span> <span class="hljs-number">03</span>:<span class="hljs-number">38</span>:<span class="hljs-number">45</span> mysqld_safe Starting mysqld daemon with databases <span class="hljs-keyword">from</span> /usr/local/mysql/data
<span class="hljs-number">200408</span> <span class="hljs-number">03</span>:<span class="hljs-number">38</span>:<span class="hljs-number">47</span> mysqld_safe mysqld <span class="hljs-keyword">from</span> pid file /usr/local/mysql/data/localhost.localdomain.pid ended

[<span class="hljs-symbol">root@</span>localhost mysql]# /usr/local/mysql/scripts/mysql_install_db --user=mysql
[<span class="hljs-symbol">root@</span>localhost mysql]# /usr/local/mysql/bin/mysqld_safe --user=mysql</code></pre></div>

<p>发现卡死了：<br><img src="http://qiqianyun.chumen77.xyz/uPic/1KP1pE.png" srcset="/img/loading.gif" alt></p>
<div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost mysql<span class="hljs-number">-5.5</span><span class="hljs-number">.23</span>]# ps aux | grep mysql</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/hNLN8i.png" srcset="/img/loading.gif" alt></p>
<div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost mysql<span class="hljs-number">-5.5</span><span class="hljs-number">.23</span>]# kill <span class="hljs-number">-9</span> <span class="hljs-number">102872</span>
[<span class="hljs-symbol">root@</span>localhost mysql<span class="hljs-number">-5.5</span><span class="hljs-number">.23</span>]# ps aux | grep mysql
mysql    <span class="hljs-number">103111</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">4.9</span> <span class="hljs-number">727288</span> <span class="hljs-number">49260</span> pts/<span class="hljs-number">3</span>    Sl   <span class="hljs-number">03</span>:<span class="hljs-number">39</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span> /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=/usr/local/mysql/data/localhost.localdomain.err --pid-file=/usr/local/mysql/data/localhost.localdomain.pid --socket=/tmp/mysql.sock --port=<span class="hljs-number">3306</span>
root     <span class="hljs-number">103201</span>  <span class="hljs-number">0.0</span>  <span class="hljs-number">0.0</span> <span class="hljs-number">112728</span>   <span class="hljs-number">972</span> pts/<span class="hljs-number">2</span>    S+   <span class="hljs-number">03</span>:<span class="hljs-number">46</span>   <span class="hljs-number">0</span>:<span class="hljs-number">00</span> grep --color=<span class="hljs-built_in">auto</span> mysql</code></pre></div>

<p>杀掉重新来。<br><img src="http://qiqianyun.chumen77.xyz/uPic/CoNvVo.png" srcset="/img/loading.gif" alt></p>
<div class="hljs"><pre><code class="hljs undefined">[root@localhost mysql]# /usr/<span class="hljs-keyword">local</span>/mysql/scripts/mysql_install_db <span class="hljs-comment">--user=mysql</span>
[root@localhost mysql]# /usr/<span class="hljs-keyword">local</span>/mysql/bin/mysqld_safe <span class="hljs-comment">--user=mysql</span></code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/a9Mt08.png" srcset="/img/loading.gif" alt><br>成功了。<br><img src="http://qiqianyun.chumen77.xyz/uPic/fUs1Vd.png" srcset="/img/loading.gif" alt></p>
<h3 id="自启动-1"><a href="#自启动-1" class="headerlink" title="自启动"></a>自启动</h3><div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost mysql<span class="hljs-number">-5.5</span><span class="hljs-number">.23</span>]# vim /etc/rc.d/rc.local</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/HTfqIB.png" srcset="/img/loading.gif" alt></p>
<h3 id="设置mysql密码"><a href="#设置mysql密码" class="headerlink" title="设置mysql密码"></a>设置mysql密码</h3><div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost mysql<span class="hljs-number">-5.5</span><span class="hljs-number">.23</span>]# /usr/local/mysql/bin/mysqladmin -u root password <span class="hljs-string">"123456"</span>
[<span class="hljs-symbol">root@</span>localhost mysql<span class="hljs-number">-5.5</span><span class="hljs-number">.23</span>]# /usr/local/mysql/bin/mysql -u root -p</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/yHAmIC.png" srcset="/img/loading.gif" alt><br>成功了。注意 <code>history -c</code> 清楚历史记录命令。<br><img src="http://qiqianyun.chumen77.xyz/uPic/SeHAFf.png" srcset="/img/loading.gif" alt><br>服务都正常，字符集格式也在。</p>
<h2 id="php"><a href="#php" class="headerlink" title="php"></a>php</h2><h3 id="准备工作-2"><a href="#准备工作-2" class="headerlink" title="准备工作"></a>准备工作</h3><div class="hljs"><pre><code class="hljs undefined">[root<span class="hljs-symbol">@localhost</span> mysql]<span class="hljs-meta"># yum -y install libtool*</span>
[root<span class="hljs-symbol">@localhost</span> <span class="hljs-keyword">local</span>]<span class="hljs-meta"># yum -y install libpng-devel</span></code></pre></div>

<p>让php支持数据库的内容：</p>
<div class="hljs"><pre><code class="hljs undefined">[root<span class="hljs-symbol">@localhost</span> mysql]<span class="hljs-meta"># vim /usr/local/gd2/<span class="hljs-meta-keyword">include</span>/gd_io.h</span></code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/MGWJ0l.png" srcset="/img/loading.gif" alt></p>
<h3 id="开始安装-1"><a href="#开始安装-1" class="headerlink" title="开始安装"></a>开始安装</h3><div class="hljs"><pre><code class="hljs undefined">[root@localhost php-5.4.25]# ./configure <span class="hljs-attribute">--prefix</span>=/usr/local/php/ <span class="hljs-attribute">--with-config-file-path</span>=/usr/local/php/etc/ <span class="hljs-attribute">--with-apxs2</span>=/usr/local/apache2/bin/apxs <span class="hljs-attribute">--with-mysql</span>=/usr/local/mysql <span class="hljs-attribute">--with-libxml-dir</span>=/usr/local/libxml2 <span class="hljs-attribute">--with-jpeg-dir</span>=/usr/local/jpeg6/ <span class="hljs-attribute">--with-png-dir</span>=/usr/local/libpng/ <span class="hljs-attribute">--with-freetype-dir</span>=/usr/local/freetype/ <span class="hljs-attribute">--with-gd</span>=/usr/local/gd2/ <span class="hljs-attribute">--with-mcrypt</span>=/usr/local/libmcrypt/ <span class="hljs-attribute">--with-mysqli</span>=/usr/local/mysql/bin/mysql_config --enable-soap <span class="hljs-attribute">--enable-mbstring</span>=all --enable-sockets <span class="hljs-attribute">--with-pdo-mysql</span>=/usr/local/mysql --without-pear</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/6P6yZd.png" srcset="/img/loading.gif" alt></p>
<div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost php<span class="hljs-number">-5.4</span><span class="hljs-number">.25</span>]# make</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/1rlM0o.png" srcset="/img/loading.gif" alt></p>
<div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost php<span class="hljs-number">-5.4</span><span class="hljs-number">.25</span>]# make install</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/PcwG4a.png" srcset="/img/loading.gif" alt></p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost php<span class="hljs-number">-5.4</span><span class="hljs-number">.25</span>]# mkdir /usr/local/php/etc
[<span class="hljs-symbol">root@</span>localhost php<span class="hljs-number">-5.4</span><span class="hljs-number">.25</span>]# cp php.ini-production /usr/local/php/etc/php.ini</code></pre></div>

<p>复制主配置文件到<code>/usr/local/php/etc</code></p>
<div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost php<span class="hljs-number">-5.4</span><span class="hljs-number">.25</span>]# vi /usr/local/apache2/etc/httpd.conf</code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/v9mdSe.png" srcset="/img/loading.gif" alt><br>修改apache2配置，让其也可以支持php</p>
<p>重启apache2:</p>
<div class="hljs"><pre><code class="hljs undefined">[root@localhost php<span class="hljs-number">-5.4</span><span class="hljs-number">.25</span>]# /usr/<span class="hljs-keyword">local</span>/apache2/bin/apachectl stop
AH00558: httpd: Could <span class="hljs-keyword">not</span> reliably determine the <span class="hljs-keyword">server</span><span class="hljs-string">'s fully qualified domain name, using localhost.localdomain. Set the '</span>ServerNam<span class="hljs-string">e' directive globally to suppress this message
[root@localhost php-5.4.25]# /usr/local/apache2/bin/apachectl start
AH00558: httpd: Could not reliably determine the server'</span>s fully qualified <span class="hljs-keyword">domain</span> <span class="hljs-type">name</span>, <span class="hljs-keyword">using</span> localhost.localdomain. <span class="hljs-keyword">Set</span> the <span class="hljs-string">'ServerName'</span> directive globally <span class="hljs-keyword">to</span> suppress this message</code></pre></div>

<p>restart 可能是无效的。</p>
<h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><h4 id="apache与php"><a href="#apache与php" class="headerlink" title="apache与php"></a>apache与php</h4><p><img src="http://qiqianyun.chumen77.xyz/uPic/Jp7nIv.png" srcset="/img/loading.gif" alt></p>
<div class="hljs"><pre><code class="hljs undefined">[root<span class="hljs-symbol">@localhost</span> htdocs]<span class="hljs-meta"># vi index.php</span></code></pre></div>

<p>写一个php探针：</p>
<div class="hljs"><pre><code class="hljs undefined"><span class="php"><span class="hljs-meta">&lt;?php</span>
        phpinfo();
<span class="hljs-meta">?&gt;</span></span></code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/zgJ5wo.png" srcset="/img/loading.gif" alt></p>
<h4 id="apache与MySQL"><a href="#apache与MySQL" class="headerlink" title="apache与MySQL"></a>apache与MySQL</h4><div class="hljs"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span>
$link=mysql_connect(<span class="hljs-string">'localhost'</span>,<span class="hljs-string">'root'</span>,<span class="hljs-string">'123456'</span>);
<span class="hljs-keyword">if</span>($link) <span class="hljs-keyword">echo</span> <span class="hljs-string">"Congratulations!!!!!!"</span>;
mysql_close();
<span class="hljs-meta">?&gt;</span></code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/RQRH44.png" srcset="/img/loading.gif" alt></p>
<h3 id="phpadmin搭建"><a href="#phpadmin搭建" class="headerlink" title="phpadmin搭建"></a>phpadmin搭建</h3><div class="hljs"><pre><code class="hljs undefined">[<span class="hljs-symbol">root@</span>localhost lamp1]# cp -r phpMyAdmin<span class="hljs-number">-4.1</span><span class="hljs-number">.4</span>-all-languages /usr/local/apache2/htdocs/phpmyadmin</code></pre></div>

<h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><div class="hljs"><pre><code class="hljs undefined"><span class="hljs-selector-attr">[root@localhost phpmyadmin]</span># <span class="hljs-selector-tag">cp</span> <span class="hljs-selector-tag">config</span><span class="hljs-selector-class">.sample</span><span class="hljs-selector-class">.inc</span><span class="hljs-selector-class">.php</span> <span class="hljs-selector-tag">config</span><span class="hljs-selector-class">.inc</span><span class="hljs-selector-class">.php</span>
<span class="hljs-selector-attr">[root@localhost phpmyadmin]</span># <span class="hljs-selector-tag">vi</span> <span class="hljs-selector-tag">config</span><span class="hljs-selector-class">.inc</span><span class="hljs-selector-class">.php</span></code></pre></div>

<p><img src="http://qiqianyun.chumen77.xyz/uPic/T9QoLf.png" srcset="/img/loading.gif" alt><br>访问测试：<br><img src="http://qiqianyun.chumen77.xyz/uPic/UK2Vd0.png" srcset="/img/loading.gif" alt></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/linux/">linux</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/04/13/Ropemporium通关记录/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Ropemporium 通关记录</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/04/03/格式化字符串漏洞小总结（下）/">
                        <span class="hidden-mobile">格式化字符串漏洞小总结（下）</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud 统计PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            总访问量 
            <span id="leancloud-site-pv"></span>
             次
          </span>
      
      
        <!-- LeanCloud 统计UV -->
        <span id="leancloud-site-uv-container" style="display: none">
            总访客数 
            <span id="leancloud-site-uv"></span>
             人
          </span>
      

    
  </div>


  

  
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>







  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '#post-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "linux- Lamp搭建记录&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "left",
      visible: "hover",
      
      icon: "#"
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>












  

  

  

  

  

  





</body>
</html>
